(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8547],{62759:function(e,t,a){"use strict";var r,i=a(67294),s=["title","titleId"];function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(null,arguments)}t.Z=function(e){var t=e.title,a=e.titleId,o=function(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}(e,s);return i.createElement("svg",_extends({width:12,height:8,viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":a},o),t?i.createElement("title",{id:a},t):null,r||(r=i.createElement("path",{d:"M11 1 6 7 1 1",stroke:"#000",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))}},41894:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/works",function(){return a(92766)}])},21079:function(e,t,a){"use strict";let r;a.d(t,{Z:function(){return b}});var i=a(85893),s=a(67294),o=a(93967),u=a.n(o),d=a(79661),m=a(15947),f=a(88399);function timeout(e){return new Promise(t=>setTimeout(t,e))}var p=a(86306);let onNewPageReady=()=>{requestAnimationFrame(async()=>{document.documentElement.classList.remove("is-page-leaving-default"),await timeout(1e3),window._lenis?.start()})},h={default:()=>new Promise(async e=>{clearTimeout(r),document.removeEventListener("new-page-ready",onNewPageReady);let t=document.querySelector(".js-page");if(t){let{scrollY:a}=window,{offsetHeight:i}=t,s=p.P.height/(i-p.P.height)/2+a/(i-p.P.height-p.P.height/(i-p.P.height));t.style.setProperty("--koef",`${-s*p.P.width*.0375}px`),t.style.transformOrigin=`50% ${100*s}%`,window._lenis?.stop(),requestAnimationFrame(()=>{document.documentElement.classList.add("is-page-leaving-default")}),document.addEventListener("new-page-ready",onNewPageReady,{once:!0}),r=setTimeout(()=>{requestAnimationFrame(async()=>{t.classList.add("is-leaving"),await timeout(500),document.dispatchEvent(new Event("default-page-transition-scale-out-start")),await timeout(600),document.dispatchEvent(new Event("default-page-transition-scale-out")),e()})},100)}else e()}),instant:()=>timeout(100).then(()=>Promise.resolve())},usePageTransition=()=>{let[{name:e,targetElement:t},a]=(0,f.cB)(),[r,i]=(0,m.oO)(),[o,u]=(0,f.Vr)(),d=(0,s.useRef)();(0,s.useEffect)(()=>{r||o||(clearTimeout(d.current),u(!0),h[e]({targetElement:t}).then(()=>{i(),a({mode:f.ws,name:f.j2})}).finally(()=>{d.current=setTimeout(()=>{u(!1)},1e3)}))},[a,r,e,i,o,u,t])};var g=a(82215),_=a(74917);let v=(0,s.forwardRef)((e,t)=>{let{children:a,breadcrumbs:r=[],...s}=e,o=(0,_.b)();return usePageTransition(),(0,d.LI)(()=>{document.dispatchEvent(new Event("new-page-ready"))},[]),(0,i.jsxs)("div",{...s,ref:t,className:u()("page js-page",s.className),children:[r.length>0&&(0,i.jsx)("nav",{"aria-label":g.l.BREADCRUMBS[o],className:"breadcrumbs account-breadcrumbs",itemScope:!0,itemType:"http://schema.org/BreadcrumbList",children:(0,i.jsx)("ol",{className:"breadcrumbs-list visually-hidden",children:r.map((e,t)=>(0,i.jsxs)("li",{className:"breadcrumbs-list__item",itemProp:"itemListElement",itemScope:!0,itemType:"http://schema.org/ListItem",children:[t===r.length-1?(0,i.jsx)("span",{className:"link breadcrumb__link",itemProp:"item",children:e.text}):(0,i.jsx)("a",{href:e.href,className:"link breadcrumb__link",itemProp:"item",children:e.text}),(0,i.jsx)("meta",{itemProp:"position",content:`${t+1}`})]},t))})}),(0,i.jsx)("div",{className:"page-inner",children:a})]})});v.displayName="DefaultLayout";var b=v},68500:function(e,t,a){"use strict";a.d(t,{Z:function(){return p}});var r=a(67294),i=a(93967),s=a.n(i),o=a(79661),u=a(52732),d=a.n(u),m=a(76530);let f=(0,r.forwardRef)((e,t)=>{let{children:a,...i}=e,u=(0,r.useRef)(null),f=(0,o.O_)();return(0,r.useEffect)(()=>{let e=f?new(d())({elements_selector:"video.lazy",threshold:1200,container:u.current?.parentElement??document.body}):null;return()=>{e?.destroy()}},[f]),(0,r.cloneElement)(a,{...i,ref:(0,m.l)([t,u]),className:s()(a.props.className,i.className,"lazy")})});f.displayName="Lazy";var p=(0,r.memo)(f)},64684:function(e,t,a){"use strict";a.d(t,{Z:function(){return f}});var r=a(85893),i=a(67294),s=a(13114),o=a(80663),u=a(82215),d=a(74917);let m=(0,i.forwardRef)((e,t)=>{let{children:a,variant:i="default",tag:m="button",isFetching:f=!1,handleClick:p,...h}=e,g=(0,d.b)();return(0,r.jsx)(m,{...h,ref:t,className:"loading-more__btn text-h-m",onClick:p,variant:i,children:(0,r.jsx)(s.M,{mode:"wait",initial:!1,children:f?(0,r.jsx)(o.m.div,{className:"loading-more__btn-dots",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:Array.from({length:7}).map((e,t)=>(0,r.jsx)("span",{className:"loading-more__btn-dot"},t))},"dots"):(0,r.jsx)(o.m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:a||u.l.SHOW_MORE[g]},"string"==typeof a?a||u.l.SHOW_MORE[g]:"text")})})});m.displayName="LoadingButton";var f=m},87739:function(e,t,a){"use strict";var r=a(85893),i=a(67294),s=a(16893),o=a(61205),u=a(80663),d=a(32964),m=a(58764);t.Z=(0,i.memo)(e=>{let{children:t,delay:a=0,duration:f=1.2,stagger:p=0,allowed:h=!0,easeFunction:g=d.J7,paddingTop:_="0.13em",...v}=e,b=(0,i.useRef)(null),x=(0,s.Y)(b,{once:!0}),E=(0,o._)(),I=t.split(" "),F=(0,m.Y)();return(0,r.jsx)("span",{...v,ref:b,style:{...v.style,display:"block"},children:I.map((e,i)=>(0,r.jsx)("span",{style:{display:"inline-block",overflow:F?"hidden":CSS.supports("overflow","clip")?"clip":"hidden",paddingTop:_,pointerEvents:"none"},children:(0,r.jsx)(u.m.span,{initial:{y:"150%"},animate:h&&x?"visible":"hidden",variants:{visible:e=>({y:0,transition:{duration:f,delay:a+p*e,ease:g}})},style:{display:"inline-block",willChange:E},custom:i,children:e+(i!==I.length-1?"\xa0":"")})},t+i))})})},69854:function(e,t,a){"use strict";a.d(t,{Z:function(){return r.Z}});var r=a(87739)},58764:function(e,t,a){"use strict";a.d(t,{Y:function(){return useIsFirstRender}});var r=a(67294);function useIsFirstRender(){let e=(0,r.useRef)(!0);return e.current?(e.current=!1,!0):e.current}},92766:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return ei},default:function(){return works}});var r=a(85893),i=a(11163),s=a(67294),o=a(21079),u=a(42378),d=a(93967),m=a.n(d),f=a(85945),p=a(62759),h=a(63174),Filter_FilterCheckbox=e=>{let{input:t,...a}=e;return(0,r.jsxs)("label",{className:"filter-item-checkbox",children:[(0,r.jsx)("input",{...a,type:"checkbox",className:"visually-hidden filter-item-checkbox__input",value:t.value}),(0,r.jsx)("span",{className:"filter-item-checkbox__element"}),(0,r.jsx)("span",{className:"filter-item-checkbox__text",dangerouslySetInnerHTML:{__html:t.text}})]})},g=a(31951),_=a(37288),v=a(56124),b=a(82215),x=a(74917),Filter_Filter=e=>{let{filter:t,filteredData:a,setFilteredData:o,...u}=e,d=(0,s.useRef)(null),[E,I]=(0,s.useState)(-1),F=(0,f.NL)(),Z=(0,i.useRouter)(),B=Object.keys(t),V=B.reduce((e,t)=>{let r=a[t];return e[t]=Array.isArray(r)?r:"string"==typeof r?[r]:[],e},{}),Y=(0,g.D)(B),J=(0,x.b)();return(0,h.t)(d,()=>I(-1)),(0,_.Z)(()=>{let e=new ResizeObserver(()=>{Y.current.forEach(e=>{if(e.current){let t=e.current.querySelector(".js-filter-item__name-text"),a=e.current.querySelector(".js-filter-item__content");if(t&&a&&d.current){let e=t.getBoundingClientRect(),r=d.current.getBoundingClientRect();a.style.paddingLeft=`${e.left-r.left}px`}}})});return d.current&&e.observe(d.current),()=>e.disconnect()},[Y]),(0,r.jsx)("form",{...u,ref:d,className:m()("filter text-default",u.className,{"filter--closed":-1===E}),children:B.map((e,a)=>t[e].filter(e=>!!e.value).length>0&&(0,r.jsxs)("div",{ref:Y.current[a],className:m()("filter-item",{"filter-item--active":a===E}),onKeyDown:e=>{"ArrowLeft"===e.code&&E>0&&I(E-1),"ArrowRight"===e.code&&E<B.length-1&&I(E+1)},children:[(0,r.jsx)("button",{type:"button",className:"filter-item__name js-filter-item__name",onClick:()=>I(E===a?-1:a),children:(0,r.jsxs)("span",{className:"filter-item__name-text js-filter-item__name-text",children:[(0,r.jsx)("span",{children:b.l[e.replace("[]","").toUpperCase()][J]}),(0,r.jsx)(p.Z,{"aria-hidden":"true"})]})}),(0,r.jsx)("div",{className:"filter-item__content js-filter-item__content",children:(0,r.jsxs)("div",{className:"filter-item__inner",children:[(0,r.jsxs)("fieldset",{className:"filter-item__fieldset",children:[(0,r.jsx)(Filter_FilterCheckbox,{name:e,input:{text:b.l.ALL[J],value:""},checked:0===V[e].length,onChange:()=>{let t={...V,[e]:[]};o?.(v.w(t)),Z.push({pathname:Z.pathname,query:{...Z.query,...t}},void 0,{shallow:!0}),F.invalidateQueries({queryKey:["filter"]})}}),t[e].map((t,a)=>!!t.value&&(0,r.jsx)(Filter_FilterCheckbox,{name:e,input:t,checked:V[e].includes(t.value),onChange:t=>{let a={...V,[e]:t.target.checked?[...V[e],t.target.value]:V[e].filter(e=>e!==t.target.value)};o?.(v.w(a)),Z.push({pathname:Z.pathname,query:{...Z.query,...a}},void 0,{shallow:!0}),F.invalidateQueries({queryKey:["filter"]})}},a))]}),(0,r.jsx)("button",{type:"button",className:"link link--underlined filter-item__reset-btn",onClick:()=>{let t={...V,[e]:[]};o?.(t),Z.push({pathname:Z.pathname,query:{...Z.query,...t}},void 0,{shallow:!0}),F.invalidateQueries({queryKey:["filter"]})},children:b.l.RESET[J]})]})})]},e))})},E=a(81047),I=a(59403),F=a(28044);let getCases=e=>F.u4.get("/v3/works",{...e,headers:{...e?.headers||{}}}).then(e=>e.data),useCasesInfiniteQuery=e=>(0,I.N)({queryKey:["cases",e.params,e.params.limit,e.headers],queryFn:t=>{let{signal:a,pageParam:r=1}=t;return getCases({params:{...e.params,page:r,limit:e.params.limit},signal:a,headers:e.headers})},getNextPageParam:(t,a)=>{let r=a.length;return e.params.limit&&r*e.params.limit<t.data.totalCount?r+1:void 0}});var Z=a(36492);let getFilter=(e,t)=>F.Wm.get("/v2/filter",{...t,headers:{...t?.headers||{},"App-Locale":e}}).then(e=>e.data),useFilterQuery=(e,t,a)=>(0,Z.a)({queryKey:["filter",e,t],queryFn:a=>{let{signal:r}=a;return getFilter(e,{signal:r,headers:t})},keepPreviousData:!0,initialData:a});var B=a(86361),V=a(17437),Y=a(60003),J=a(4958),ee=a(39688),et=a(64684),Cases_Cases=e=>{let{initialCases:t,initialCasesParams:a,initialFilterData:i,workTypes:o,workWorkType:u,organizations:d,...f}=e,p=(0,x.b)(),[h,g]=(0,s.useState)(a),_=useFilterQuery(p,{},i),{data:v,fetchNextPage:I,hasNextPage:F,isFetching:Z,isError:ea}=useCasesInfiniteQuery({params:{...h,limit:10},headers:{"App-locale":p}}),er=v?.pages.flatMap(e=>e.data.items)??[],ei=(0,B.E)(),es=(0,V.N)(ei,600),el=(0,V.N)(es,200),eo=(er||[]).map(e=>({...e,additional_images:e.additional_images.map(e=>({...e,src:(0,J.h)(e.src)})),image:e.image?{...e.image,src:(0,J.h)(e.image.src)}:null,images:(e.images??[]).map(e=>({...e,src:(0,J.h)(e.src)})),video:e.video?e.video.map(e=>({...e,src:(0,J.h)(e.src)})):[]})),ec=Object.keys(_.data.data).reduce((e,t)=>(e[`${t}[]`]=_.data.data[t],e),{});return(0,r.jsxs)("div",{...f,className:m()("cases",f.className),children:[ec&&(0,r.jsx)(Y.Z,{allowed:es,children:(0,r.jsx)("div",{className:"cases__filter-wrapper",children:(0,r.jsx)(Filter_Filter,{filter:ec,filteredData:h,setFilteredData:g,className:"cases__filter"})})}),eo.length>0?(0,r.jsx)(Y.Z,{allowed:el,children:(0,r.jsxs)("div",{className:"cases-list-wrapper",children:[(0,r.jsx)("div",{className:m()("cases-list-loader-wrapper",{"cases-list-loader-wrapper--visible":Z})}),(0,r.jsx)("ul",{className:"list-unstyled cases-list",children:eo.map((e,t)=>{let a=(0,ee.v)(e.awards,"organization_id"),i=Object.entries(a).map(e=>{let[t,a]=e,r=d.find(e=>e.id===parseInt(t)),i=[...new Set(a.map(e=>e.year).sort((e,t)=>e-t))];return{name:r?.name??"",date:i.join(" â€” "),description:"",logo:r?.logo??null,earnedAwards:a.map(e=>e.name)}}).slice(0,3).filter(e=>!!e.logo),s=u.reduce((t,a)=>{if(a.work_id===e.id&&!t.find(e=>e.id===a.work_type_id)){let e=o.find(e=>e.id===a.work_type_id);e&&t.push({id:e.id,name:e.name})}return t},[]);return(0,r.jsx)(Y.Z,{delay:100,instant:!0,children:(0,r.jsx)("li",{className:"cases-list__item",children:(0,r.jsx)(E.Z,{slug:e.slug,image:e.image??void 0,isNew:"new"===e.status,inProgress:"in_progress"===e.status,isOnline:"online"===e.status,isConcept:"concept"===e.status,title:e.name,types:s.map(e=>e.name),awards:i,video:e.video??void 0,imgPriority:0===t})})},e.id)})}),F&&(0,r.jsx)("div",{className:"loading-more__btn-wrapper",children:(0,r.jsx)(et.Z,{handleClick:I,isFetching:Z,children:b.l.SHOW_MORE[p]})})]})}):(0,r.jsx)(Y.Z,{allowed:el,children:(0,r.jsx)("div",{className:"cases-list",children:(0,r.jsx)("div",{className:"text-s cases-list-no-content",children:b.l.FILTERED_NO_RESULTS_FOUND[p]})})})]})},ea=a(69854);let er="PRESERVED_SCROLL_Y";var ei=!0,works=e=>{let{h1:t,initialCases:a,initialCasesParams:d,initialFilterData:m,workTypes:f,workWorkType:p,organizations:h,breadcrumbs:g}=e,_=(0,B.E)(),v=(0,x.b)(),b=(0,i.useRouter)();return(0,s.useEffect)(()=>{if(_){let e=sessionStorage.getItem(er);e&&window.scroll({top:parseFloat(e),behavior:"auto"}),sessionStorage.removeItem(er)}},[_]),(0,s.useEffect)(()=>{let onRouteChange=e=>{e.startsWith("/works/")&&sessionStorage.setItem(er,window.scrollY.toString())};return b.events.on("routeChangeStart",onRouteChange),()=>{b.events.off("routeChangeStart",onRouteChange)}},[b]),(0,r.jsxs)(o.Z,{className:"wrapper",breadcrumbs:g,children:[t&&(0,r.jsx)("h1",{className:"cases-page-title",children:(0,r.jsx)(ea.Z,{allowed:_,children:(0,u.tp)(t,v)})}),(0,r.jsx)(Cases_Cases,{initialCases:a,initialCasesParams:d,initialFilterData:m,workTypes:f,workWorkType:p,organizations:h})]})}},54619:function(e,t,a){"use strict";a.d(t,{L:function(){return convertPathApiAsset}});let convertPathApiAsset=e=>(e.startsWith("/storage")?"https://chipsa.ru":"")+e},56124:function(e,t,a){"use strict";function toFormData(e){let t=new FormData;for(let a in e)if(e.hasOwnProperty(a)){let r=e[a];Array.isArray(r)?r.forEach(e=>t.append(decodeURIComponent(a),e)):t.append(a,r)}return t}a.d(t,{k:function(){return toFormData},w:function(){return removeNullishFromObject}});let removeNullishFromObject=e=>{let t={...e};for(let e in t)(!t[e]||Array.isArray(t[e])&&0===t[e].length)&&delete t[e];return t}},39688:function(e,t,a){"use strict";function groupBy(e,t){return e.reduce((e,a)=>{let r=`${a[t]}`;return("string"==typeof r||"number"==typeof r)&&(e[r]=e[r]??[],e[r].push(a)),e},{})}a.d(t,{v:function(){return groupBy}})},52732:function(e){e.exports=function(){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}var e="undefined"!=typeof window,t=e&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),a=e&&"IntersectionObserver"in window,r=e&&"classList"in document.createElement("p"),i=e&&window.devicePixelRatio>1,s={elements_selector:".lazy",container:t||e?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},c=function(e){return n({},s,e)},l=function(e,t){var a,r="LazyLoad::Initialized",i=new e(t);try{a=new CustomEvent(r,{detail:{instance:i}})}catch(e){(a=document.createEvent("CustomEvent")).initCustomEvent(r,!1,!1,{instance:i})}window.dispatchEvent(a)},o="srcset",u="sizes",d="poster",m="llOriginalAttrs",f="data",p="loading",h="loaded",g="applied",_="error",v="native",y=function(e,t){return e.getAttribute("data-"+t)},k=function(e){return y(e,"ll-status")},w=function(e,t){var a;return a="data-ll-status",void(null!==t?e.setAttribute(a,t):e.removeAttribute(a))},A=function(e){return w(e,null)},L=function(e){return null===k(e)},O=function(e){return k(e)===v},b=[p,h,g,_],C=function(e,t,a,r){e&&"function"==typeof e&&(void 0===r?void 0===a?e(t):e(t,a):e(t,a,r))},N=function(e,t){""!==t&&(r?e.classList.add(t):e.className+=(e.className?" ":"")+t)},M=function(e,t){""!==t&&(r?e.classList.remove(t):e.className=e.className.replace(RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,""))},z=function(e){return e.llTempImage},T=function(e,t){if(t){var a=t._observer;a&&a.unobserve(e)}},R=function(e,t){e&&(e.loadingCount+=t)},G=function(e,t){e&&(e.toLoadCount=t)},j=function(e){for(var t,a=[],r=0;t=e.children[r];r+=1)"SOURCE"===t.tagName&&a.push(t);return a},D=function(e,t){var a=e.parentNode;a&&"PICTURE"===a.tagName&&j(a).forEach(t)},H=function(e,t){j(e).forEach(t)},x=["src"],E=["src",d],I=["src",o,u],F=[f],P=function(e){return!!e[m]},S=function(e){return e[m]},U=function(e){return delete e[m]},$=function(e,t){if(!P(e)){var a={};t.forEach(function(t){a[t]=e.getAttribute(t)}),e[m]=a}},q=function(e,t){if(P(e)){var a=S(e);t.forEach(function(t){var r;(r=a[t])?e.setAttribute(t,r):e.removeAttribute(t)})}},K=function(e,t,a){N(e,t.class_applied),w(e,g),a&&(t.unobserve_completed&&T(e,t),C(t.callback_applied,e,a))},Q=function(e,t,a){N(e,t.class_loading),w(e,p),a&&(R(a,1),C(t.callback_loading,e,a))},W=function(e,t,a){a&&e.setAttribute(t,a)},X=function(e,t){W(e,u,y(e,t.data_sizes)),W(e,o,y(e,t.data_srcset)),W(e,"src",y(e,t.data_src))},Z={IMG:function(e,t){D(e,function(e){$(e,I),X(e,t)}),$(e,I),X(e,t)},IFRAME:function(e,t){$(e,x),W(e,"src",y(e,t.data_src))},VIDEO:function(e,t){H(e,function(e){$(e,x),W(e,"src",y(e,t.data_src))}),$(e,E),W(e,d,y(e,t.data_poster)),W(e,"src",y(e,t.data_src)),e.load()},OBJECT:function(e,t){$(e,F),W(e,f,y(e,t.data_src))}},B=["IMG","IFRAME","VIDEO","OBJECT"],nn=function(e,t){!t||t.loadingCount>0||t.toLoadCount>0||C(e.callback_finish,t)},tn=function(e,t,a){e.addEventListener(t,a),e.llEvLisnrs[t]=a},en=function(e,t,a){e.removeEventListener(t,a)},on=function(e){return!!e.llEvLisnrs},an=function(e){if(on(e)){var t=e.llEvLisnrs;for(var a in t){var r=t[a];en(e,a,r)}delete e.llEvLisnrs}},rn=function(e,t,a){delete e.llTempImage,R(a,-1),a&&(a.toLoadCount-=1),M(e,t.class_loading),t.unobserve_completed&&T(e,a)},cn=function(e,t,a){var r,i=z(e)||e;on(i)||(on(i)||(i.llEvLisnrs={}),r="VIDEO"===i.tagName?"loadeddata":"load",tn(i,r,function(r){var s;s=O(e),rn(e,t,a),N(e,t.class_loaded),w(e,h),C(t.callback_loaded,e,a),s||nn(t,a),an(i)}),tn(i,"error",function(r){var s;s=O(e),rn(e,t,a),N(e,t.class_error),w(e,_),C(t.callback_error,e,a),t.restore_on_error&&q(e,I),s||nn(t,a),an(i)}))},ln=function(e,t,a){var r,s,o,u,d,f,p;B.indexOf(e.tagName)>-1?(cn(e,t,a),(p=Z[e.tagName])&&(p(e,t),Q(e,t,a))):(e.llTempImage=document.createElement("IMG"),cn(e,t,a),P(e)||(e[m]={backgroundImage:e.style.backgroundImage}),r=y(e,t.data_bg),s=y(e,t.data_bg_hidpi),(o=i&&s?s:r)&&(e.style.backgroundImage='url("'.concat(o,'")'),z(e).setAttribute("src",o),Q(e,t,a)),u=y(e,t.data_bg_multi),d=y(e,t.data_bg_multi_hidpi),(f=i&&d?d:u)&&(e.style.backgroundImage=f,K(e,t,a)),function(e,t,a){var r=y(e,t.data_bg_set);if(r){var i=r.split("|"),s=i.map(function(e){return"image-set(".concat(e,")")});e.style.backgroundImage=s.join(),""===e.style.backgroundImage&&(s=i.map(function(e){return"-webkit-image-set(".concat(e,")")}),e.style.backgroundImage=s.join()),K(e,t,a)}}(e,t,a))},un=function(e){e.removeAttribute("src"),e.removeAttribute(o),e.removeAttribute(u)},sn=function(e){D(e,function(e){q(e,I)}),q(e,I)},V={IMG:sn,IFRAME:function(e){q(e,x)},VIDEO:function(e){H(e,function(e){q(e,x)}),q(e,E),e.load()},OBJECT:function(e){q(e,F)}},fn=function(e,t){var a;(a=V[e.tagName])?a(e):function(e){if(P(e)){var t=S(e);e.style.backgroundImage=t.backgroundImage}}(e),L(e)||O(e)||(M(e,t.class_entered),M(e,t.class_exited),M(e,t.class_applied),M(e,t.class_loading),M(e,t.class_loaded),M(e,t.class_error)),A(e),U(e)},Y=["IMG","IFRAME","VIDEO"],gn=function(e){return e.use_native&&"loading"in HTMLImageElement.prototype},vn=function(e,t,a){e.forEach(function(e){var r,i,s;return e.isIntersecting||e.intersectionRatio>0?(r=e.target,i=b.indexOf(k(r))>=0,void(w(r,"entered"),N(r,t.class_entered),M(r,t.class_exited),t.unobserve_entered&&T(r,a),C(t.callback_enter,r,e,a),i||ln(r,t,a))):void(L(s=e.target)||(N(s,t.class_exited),t.cancel_on_exit&&k(s)===p&&"IMG"===s.tagName&&(an(s),D(s,function(e){un(e)}),un(s),sn(s),M(s,t.class_loading),R(a,-1),A(s),C(t.callback_cancel,s,e,a)),C(t.callback_exit,s,e,a)))})},bn=function(e){return Array.prototype.slice.call(e)},pn=function(e){return e.container.querySelectorAll(e.elements_selector)},mn=function(e){return k(e)===_},hn=function(e,t){return bn(e||pn(t)).filter(L)},En=function(t,r){var i,s,o=c(t);this._settings=o,this.loadingCount=0,i=this,a&&!gn(o)&&(i._observer=new IntersectionObserver(function(e){vn(e,o,i)},{root:o.container===document?null:o.container,rootMargin:o.thresholds||o.threshold+"px"})),s=this,e&&(s._onlineHandler=function(){bn(pn(o)).filter(mn).forEach(function(e){M(e,o.class_error),A(e)}),s.update()},window.addEventListener("online",s._onlineHandler)),this.update(r)};return En.prototype={update:function(e){var r,i,s=this._settings,o=hn(e,s);G(this,o.length),!t&&a?gn(s)?(r=this,o.forEach(function(e){var t;-1!==Y.indexOf(e.tagName)&&(e.setAttribute("loading","lazy"),cn(e,s,r),(t=Z[e.tagName])&&t(e,s),w(e,v))}),G(r,0)):(function(e){e.disconnect()}(i=this._observer),function(e,t){t.forEach(function(t){e.observe(t)})}(i,o)):this.loadAll(o)},destroy:function(){this._observer&&this._observer.disconnect(),e&&window.removeEventListener("online",this._onlineHandler),pn(this._settings).forEach(function(e){U(e)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){var t=this,a=this._settings;hn(e,a).forEach(function(e){T(e,t),ln(e,a,t)})},restoreAll:function(){var e=this._settings;pn(e).forEach(function(t){fn(t,e)})}},En.load=function(e,t){ln(e,c(t))},En.resetStatus=function(e){A(e)},e&&function(e,t){if(t){if(t.length)for(var a,r=0;a=t[r];r+=1)l(e,a);else l(e,t)}}(En,window.lazyLoadOptions),En}()}},function(e){e.O(0,[1047,9774,2888,179],function(){return e(e.s=41894)}),_N_E=e.O()}]);