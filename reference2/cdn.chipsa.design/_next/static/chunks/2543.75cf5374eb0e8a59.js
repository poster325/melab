"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2543],{86701:function(e,t,r){r.d(t,{mE:function(){return useTexture}});var n=r(67294),o=r(99477),i=r(69034);let IsObject=e=>e===Object(e)&&!Array.isArray(e)&&"function"!=typeof e;function useTexture(e,t){let r=(0,i.D)(e=>e.gl),a=(0,i.H)(o.TextureLoader,IsObject(e)?Object.values(e):e);(0,n.useLayoutEffect)(()=>{null==t||t(a)},[t]),(0,n.useEffect)(()=>{if("initTexture"in r){let e=[];Array.isArray(a)?e=a:a instanceof o.Texture?e=[a]:IsObject(a)&&(e=Object.values(a)),e.forEach(e=>{e instanceof o.Texture&&r.initTexture(e)})}},[r,a]);let u=(0,n.useMemo)(()=>{if(!IsObject(e))return a;{let t={},r=0;for(let n in e)t[n]=a[r++];return t}},[e,a]);return u}useTexture.preload=e=>i.H.preload(o.TextureLoader,e),useTexture.clear=e=>i.H.clear(o.TextureLoader,e)},10931:function(e,t,r){r.d(t,{y:function(){return useVideoTexture}});var n,o,i=r(67294),a=r(99477),u=r(69034),l=r(58139),c=r(93041);let s="undefined"!=typeof window&&"function"==typeof(null==(n=window.document)?void 0:n.createElement)&&"string"==typeof(null==(o=window.navigator)?void 0:o.userAgent),d=null;async function getHls(...e){var t;null!==(t=d)&&void 0!==t||(d=await Promise.resolve().then(r.bind(r,93041)));let n=d.default;return n.isSupported()?new n(...e):null}function useVideoTexture(e,{unsuspend:t="loadedmetadata",start:r=!0,hls:n={},crossOrigin:o="anonymous",muted:d=!0,loop:f=!0,playsInline:p=!0,onVideoFrame:m,...h}={}){let g=(0,u.D)(e=>e.gl),v=(0,i.useRef)(null),y=(0,l.Rq)(()=>new Promise(async r=>{let i,u;"string"==typeof e?i=e:u=e;let l=Object.assign(document.createElement("video"),{src:i,srcObject:u,crossOrigin:o,loop:f,muted:d,playsInline:p,...h});if(i&&s&&i.endsWith(".m3u8")){let e=v.current=await getHls(n);e&&(e.on(c.Events.MEDIA_ATTACHED,()=>void e.loadSource(i)),e.attachMedia(l))}let m=new a.VideoTexture(l);"colorSpace"in m?m.colorSpace=g.outputColorSpace:m.encoding=g.outputEncoding,l.addEventListener(t,()=>r(m))}),[e]),E=y.source.data;return useVideoFrame(E,m),(0,i.useEffect)(()=>(r&&y.image.play(),()=>{v.current&&(v.current.destroy(),v.current=null)}),[y,r]),y}let useVideoFrame=(e,t)=>{(0,i.useEffect)(()=>{let r;if(!t||!e.requestVideoFrameCallback)return;let callback=(...n)=>{t(...n),r=e.requestVideoFrameCallback(callback)};return e.requestVideoFrameCallback(callback),()=>e.cancelVideoFrameCallback(r)},[e,t])}},40705:function(e,t,r){r.d(t,{G:function(){return f}});var n=r(87462),o=r(67294),i=r(99477),a=r(69034),u=r(85470);let isOrthographicCamera=e=>e&&e.isOrthographicCamera,l=new i.Color,c=(0,u.Z)();function computeContainerPosition(e,t){let{right:r,top:n,left:o,bottom:i,width:a,height:u}=t,l=t.bottom<0||n>e.height||r<0||t.left>e.width;if("top"in e){let t=e.top+e.height,c=o-e.left;return{position:{width:a,height:u,left:c,top:n,bottom:t-i,right:r},isOffscreen:l}}let c=e.height-i;return{position:{width:a,height:u,top:n,left:o,bottom:c,right:r},isOffscreen:l}}function prepareSkissor(e,{left:t,bottom:r,width:n,height:o}){let i;let a=n/o;return isOrthographicCamera(e.camera)?e.camera.manual?e.camera.updateProjectionMatrix():(e.camera.left!==-(n/2)||e.camera.right!==n/2||e.camera.top!==o/2||e.camera.bottom!==-(o/2))&&(Object.assign(e.camera,{left:-(n/2),right:n/2,top:o/2,bottom:-(o/2)}),e.camera.updateProjectionMatrix()):e.camera.aspect!==a&&(e.camera.aspect=a,e.camera.updateProjectionMatrix()),i=e.gl.autoClear,e.gl.autoClear=!1,e.gl.setViewport(t,r,n,o),e.gl.setScissor(t,r,n,o),e.gl.setScissorTest(!0),i}function finishSkissor(e,t){e.gl.setScissorTest(!1),e.gl.autoClear=t}function clear(e){e.gl.getClearColor(l),e.gl.setClearColor(l,e.gl.getClearAlpha()),e.gl.clear(!0,!0)}function Container({visible:e=!0,canvasSize:t,scene:r,index:n,children:i,frames:u,rect:l,track:c}){let s=(0,a.D)(),[d,f]=o.useState(!1),p=0;return(0,a.F)(n=>{if(u===1/0||p<=u){var o;c&&(l.current=null==(o=c.current)?void 0:o.getBoundingClientRect()),p++}if(l.current){let{position:o,isOffscreen:a}=computeContainerPosition(t,l.current);if(d!==a&&f(a),e&&!d&&l.current){let e=prepareSkissor(n,o);n.gl.render(i?n.scene:r,n.camera),finishSkissor(n,e)}}},n),o.useLayoutEffect(()=>{let r=l.current;if(r&&(!e||!d)){let{position:e}=computeContainerPosition(t,r),n=prepareSkissor(s,e);clear(s),finishSkissor(s,n)}},[e,d]),o.useEffect(()=>{if(!c)return;let e=l.current,r=s.get().events.connected;return s.setEvents({connected:c.current}),()=>{if(e){let{position:r}=computeContainerPosition(t,e),n=prepareSkissor(s,r);clear(s),finishSkissor(s,n)}s.setEvents({connected:r})}},[c]),o.useEffect(()=>{"top"in t||console.warn("Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.\n See https://github.com/pmndrs/drei/issues/944")},[]),o.createElement(o.Fragment,null,i,o.createElement("group",{onPointerOver:()=>null}))}let s=o.forwardRef(({track:e,visible:t=!0,index:r=1,id:u,style:l,className:c,frames:s=1/0,children:d,...f},p)=>{var m,h,g,v;let y=o.useRef(null),{size:E,scene:b}=(0,a.D)(),[C]=o.useState(()=>new i.Scene),[S,w]=o.useReducer(()=>!0,!1),k=o.useCallback((t,r)=>{if(y.current&&e&&e.current&&t.target===e.current){let{width:e,height:n,left:o,top:i}=y.current,a=t.clientX-o,u=t.clientY-i;r.pointer.set(a/e*2-1,-(2*(u/n))+1),r.raycaster.setFromCamera(r.pointer,r.camera)}},[y,e]);return o.useEffect(()=>{var t;e&&(y.current=null==(t=e.current)?void 0:t.getBoundingClientRect()),w()},[e]),o.createElement("group",(0,n.Z)({ref:p},f),S&&(0,a.h)(o.createElement(Container,{visible:t,canvasSize:E,frames:s,scene:b,track:e,rect:y,index:r},d),C,{events:{compute:k,priority:r},size:{width:null==(m=y.current)?void 0:m.width,height:null==(h=y.current)?void 0:h.height,top:null==(g=y.current)?void 0:g.top,left:null==(v=y.current)?void 0:v.left}}))}),d=o.forwardRef(({as:e="div",id:t,visible:r,className:i,style:a,index:u=1,track:l,frames:d=1/0,children:f,...p},m)=>{let h=o.useId(),g=o.useRef(null);return o.useImperativeHandle(m,()=>g.current),o.createElement(o.Fragment,null,o.createElement(e,(0,n.Z)({ref:g,id:t,className:i,style:a},p)),o.createElement(c.In,null,o.createElement(s,{visible:r,key:h,track:g,frames:d,index:u},f)))}),f=(()=>{let e=o.forwardRef((e,t)=>{let r=o.useContext(a.g);return r?o.createElement(s,(0,n.Z)({ref:t},e)):o.createElement(d,(0,n.Z)({ref:t},e))});return e.Port=()=>o.createElement(c.Out,null),e})()},4511:function(e,t,r){r.d(t,{SV:function(){return ErrorBoundary}});var n=r(67294);let o=(0,n.createContext)(null),i={didCatch:!1,error:null};let ErrorBoundary=class ErrorBoundary extends n.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=i}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){let{error:e}=this.state;if(null!==e){for(var t,r,n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];null===(t=(r=this.props).onReset)||void 0===t||t.call(r,{args:o,reason:"imperative-api"}),this.setState(i)}}componentDidCatch(e,t){var r,n;null===(r=(n=this.props).onError)||void 0===r||r.call(n,e,t)}componentDidUpdate(e,t){let{didCatch:r}=this.state,{resetKeys:n}=this.props;if(r&&null!==t.error&&function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.length!==t.length||e.some((e,r)=>!Object.is(e,t[r]))}(e.resetKeys,n)){var o,a;null===(o=(a=this.props).onReset)||void 0===o||o.call(a,{next:n,prev:e.resetKeys,reason:"keys"}),this.setState(i)}}render(){let{children:e,fallbackRender:t,FallbackComponent:r,fallback:i}=this.props,{didCatch:a,error:u}=this.state,l=e;if(a){let e={error:u,resetErrorBoundary:this.resetErrorBoundary};if("function"==typeof t)l=t(e);else if(r)l=(0,n.createElement)(r,e);else if(void 0!==i)l=i;else throw u}return(0,n.createElement)(o.Provider,{value:{didCatch:a,error:u,resetErrorBoundary:this.resetErrorBoundary}},l)}}},57632:function(e,t,r){let n;r.d(t,{Z:function(){return esm_browser_v4}});let o="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var i={randomUUID:o};let a=new Uint8Array(16),u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));var esm_browser_v4=function(e,t,r){if(i.randomUUID&&!t&&!e)return i.randomUUID();e=e||{};let o=e.random||(e.rng||function(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)})();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return function(e,t=0){return u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]}(o)}},88459:function(e,t,r){r.d(t,{p:function(){return useAnimationFrame}});var n=r(67294),o=r(16014),i=r(26166);function useAnimationFrame(e){let t=(0,n.useRef)(0),{isStatic:r}=(0,n.useContext)(o._);(0,n.useEffect)(()=>{if(r)return;let provideTimeSinceStart=({timestamp:r,delta:n})=>{t.current||(t.current=r),e(r-t.current,n)};return i.Wi.update(provideTimeSinceStart,!0),()=>(0,i.Pn)(provideTimeSinceStart)},[e])}},40975:function(e,t,r){r.d(t,{T:function(){return useVelocity}});var n=r(14025),o=r(4960),i=r(26166);function useVelocity(e){let t=(0,o.c)(e.getVelocity()),updateVelocity=()=>{let r=e.getVelocity();t.set(r),r&&i.Wi.update(updateVelocity)};return(0,n.W)(e,"change",()=>{i.Wi.update(updateVelocity,!1,!0)}),t}}}]);