"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2606],{53586:function(e,t,n){n.r(t);var o=n(85893),i=n(67294),r=n(93967),s=n.n(r),a=n(5152),l=n.n(a),c=n(65912),m=n(48828),u=n(80663),d=n(79661),p=n(70697),x=n(87739),h=n(76305),v=n(86361),f=n(40705),y=n(58415),g=n(25570),b=n(74446),_=n(48358),w=n(53905),S=n(82215),j=n(74917),P=n(9878),A=n(60003),I=n(4511),z=n(41079),k=n(41910),V=n(25675),C=n.n(V);let M=l()(()=>n.e(6965).then(n.bind(n,86965)),{loadableGenerated:{webpack:()=>[86965]},ssr:!1}),R=(0,i.memo)(e=>{let{canvasRef:t,firstSectionBlock:n}=e,i=(0,d.tm)(),[r]=(0,h.zY)(),s=(0,z.$q)(),{scrollY:a,scrollYProgress:l}=(0,c.v)({target:n,offset:["start start","end start"],layoutEffect:!1}),x=(0,d.yU)({ref:n,box:"border-box"}),v=(0,m.H)(l,e=>"desktop"===r?e>.5?Math.min(a.get()-(x.height??0)/3,(x.height??0)-550):e*((x.height??0)/3):0);return(0,o.jsx)(p.Z,{className:"index-page-canvas",children:(0,o.jsx)("div",{className:"index-page-canvas-itself",children:(0,o.jsx)(I.SV,{fallback:null,onError:e=>{(0,k.Tb)(e),s(!0)},children:(0,o.jsx)(u.m.div,{ref:t,className:"index-page-canvas-itself-inner js-index-page-canvas-itself",style:i()?{y:v}:void 0,children:"desktop"===r?(0,o.jsx)(g.T.In,{children:(0,o.jsx)(f.G,{track:t,children:(0,o.jsx)(y.default,{})})}):(0,o.jsx)(M,{})})})})})});R.displayName="MemoizedKeyVisualCanvas",t.default=e=>{let{title:t,description:n,bottomTitle:r,bottomDescription:a,awardLabel:l,...c}=e,m=(0,i.useRef)(null),u=(0,i.useRef)(null),d="about",p=(0,v.E)(),h=(0,b.eg)(),f=(0,b.oP)(),y=(0,j.b)();return(0,o.jsxs)("section",{...c,className:s()("section first-section wrapper",c.className),children:[(0,o.jsxs)("div",{ref:m,className:"first-section-block",children:[(0,o.jsxs)("div",{className:"first-section-content",children:[t&&(0,o.jsx)("h1",{className:"h3 index-title",children:(0,o.jsx)(x.Z,{delay:0,allowed:p,children:t})}),n&&(0,o.jsx)("p",{className:"text-xxl index-description",children:(0,o.jsx)(x.Z,{delay:.07,allowed:p,children:n})}),l&&(0,o.jsx)(A.Z,{allowed:p,delay:700,instant:!0,children:(0,o.jsxs)("a",{href:l.href,className:"index-award-label pointer-events-auto",target:"_blank",rel:"noreferrer nofollow",children:[(0,o.jsx)("div",{className:"index-award-label__icon",children:(0,o.jsx)(C(),{src:l.icon.src,width:l.icon.width,height:l.icon.height,alt:"",className:"img-fluid index-award-label__icon-el"})}),(0,o.jsx)("div",{className:"text-h-m index-award-label__text",children:l.text})]})})]}),(0,o.jsx)(R,{canvasRef:u,firstSectionBlock:m})]}),(0,o.jsxs)("div",{id:d,className:"first-section-about","data-navigation-section":d,children:[r&&(0,o.jsx)("p",{className:"h1 first-section__secondary-title",children:(0,o.jsx)(x.Z,{delay:.1,allowed:p,children:r})}),(0,o.jsxs)("div",{className:"first-section__secondary-text",children:[a&&(0,o.jsx)("p",{className:"text-xxl first-section__secondary-text-el",children:(0,o.jsx)(x.Z,{delay:.1,allowed:p,paddingTop:"0",children:a})}),(0,o.jsx)(A.Z,{allowed:p,children:(0,o.jsxs)("button",{className:"first-section__showreel-btn pointer-events-auto",onClick:()=>f((0,_.m)(h,w.fA)),children:[(0,o.jsxs)("span",{className:"video-block__icon-square",children:[(0,o.jsx)("span",{className:"video-block__icon-square__bg"}),(0,o.jsx)(P.Z,{style:{position:"relative",left:1}})]}),(0,o.jsx)("span",{className:"first-section__showreel-btn__text",children:S.l.WATCH_SHOWREEL[y]})]})})]})]})]})}},60003:function(e,t,n){n.d(t,{Z:function(){return Reveal_Reveal}});var o=n(93967),i=n.n(o),r=n(67294),Reveal_Reveal=e=>{let{children:t,type:n,delay:o=0,allowed:s=!0,instant:a=!1,...l}=e,c=(0,r.useRef)(null),[m,u]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e;return a?s&&setTimeout(()=>{u(!0)},o):(e=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(t.unobserve(e.target),setTimeout(()=>{u(!0)},1e3*o))})}),c.current&&s&&e.observe(c.current)),()=>{e?.disconnect()}},[o,s,a]),(0,r.cloneElement)(t,{...l,...t.props,ref:c,"data-reveal":!0,"data-reveal-type":n,className:i()(l.className,t.props.className,{"is-revealed":m})})}},58415:function(e,t,n){n.r(t),n.d(t,{default:function(){return webgl_Scene}});var o=n(85893),i=n(67294),r=n(65912),s=n(48828),a=n(69034),l=n(76305),c=n(74441),m=n(11249),u=n(86361),d=n(11673),p=n(63857),x=n(86701),h=n(76530),v=n(99477),f=n(32964),y=n(65021);let tween=(e,t,n)=>{let o=!1,i=[];return Object.entries(e).forEach(r=>{let[s,a]=r;if("number"!=typeof a||"number"!=typeof t[s])return;let l=(0,y.j)(a,t[s],{...n,onComplete:o?void 0:n.onComplete,onUpdate:t=>{e[s]=t,n.onUpdate?.(e)}});o=!0,i.push(l)}),i},tweenAsync=(e,t,n)=>{let o=[];return new Promise(i=>{o=tween(e,t,{...n,onComplete:()=>{n.onComplete?.(),i(o)}})})},eulerToVector3=e=>new v.Vector3(e.x,e.y,e.z),onActionFinished=(e,t)=>{let n=e.getMixer(),listener=o=>{o.action===e&&(n.removeEventListener("finished",listener),t())};n.addEventListener("finished",listener)};var g=n(4958),b=n.p+"static/media/stone-5-opt.010333a5.glb",_=n.p+"static/media/stone-5-mobile-opt.de7b1163.glb",w=n(82215),S=n(74917),j=n(36573),use_canvas=()=>{let e=(0,a.D)(e=>e.gl.domElement),t=(0,j.DB)(),n=(0,S.b)(),o=(0,i.useCallback)(o=>{"pointer"===o?t(w.l.CLICK_ME[n]):t(null),e&&(e.style.cursor=o||"auto");let i=document.querySelector(".js-index-page-canvas-itself");i&&(i.style.cursor=o||"auto")},[e]);return{element:e,setCursor:o}};let P=new v.Vector3,A=new v.Vector3,I=[new v.Vector3(3.12455657441246,-1.0441748808451077,-.37456591722621113),new v.Vector3(-3.1454362869262695,-.17167353630065918,-.06510299444198608),new v.Vector3(-1.6905405521392822,-.8763149976730347,.9573066234588623),new v.Vector3(-.8822712898254395,-.11424469947814941,-.7177935838699341),new v.Vector3(2.5572404861450195,1.1624056100845337,1.5287210941314697),new v.Vector3(.8706099390983582,-.36785000562667847,-.6984004378318787),new v.Vector3(3.1627278327941895,.3161140978336334,.7646702527999878),new v.Vector3(3.2604973316192627,-.3763432204723358,-.591684103012085),new v.Vector3(-2.890933036804199,.38691914081573486,-1.2422475814819336),new v.Vector3(2.929788827896118,.8887410163879395,.6240242123603821),new v.Vector3(1.247345209121704,.5057134628295898,1.2522153854370117),new v.Vector3(1.8298699855804443,.8988932967185974,1.0975984334945679),new v.Vector3(.15033066272735596,-.1292807161808014,.8551919460296631),new v.Vector3(1.9058117866516113,-1.2371293306350708,-1.0550049543380737),new v.Vector3(-2.5153093338012695,.41899776458740234,-.17239698767662048),new v.Vector3(1.6841394656694937,.1489512197567874,.317192289117668),new v.Vector3(-2.210561513900757,.3294835686683655,-1.4672166109085083),new v.Vector3(.2940829396247864,-.40431055426597595,-.15303631126880646),new v.Vector3(-1.7423100471496582,.5653617978096008,-.9865392446517944),new v.Vector3(-.7915376424789429,-.2976182699203491,1.1694166660308838),new v.Vector3(-1.515168309211731,-.08804076910018921,.37655311822891235),new v.Vector3(1.839732050895691,-.5906833410263062,-.7822372913360596),new v.Vector3(-3.2240564823150635,.567206621170044,-.6259978413581848),new v.Vector3(-2.7843778133392334,-.40556004643440247,.6344060897827148)],z=(0,i.forwardRef)((e,t)=>{let{sectionScrollYProgress:n,register:r,...s}=e,l=use_canvas(),u=(0,i.useRef)(null),y=(0,g.h)(matchMedia("(max-width: 1024px)").matches?_:b),{nodes:w,materials:S,animations:j}=(0,d.L)(y,!0),{actions:z}=(0,p.v)(j,u),k=(0,i.useRef)(!1),V=(0,i.useRef)([]),C=(0,i.useRef)(I),M=(0,i.useRef)(new v.Vector3),R=(0,i.useRef)(new v.Vector3),E=(0,x.mE)((0,g.h)("https://cdn.chipsa.design/_next/static/media/hdri.d7471897.webp"));E.mapping=v.EquirectangularReflectionMapping,S.StoneAllIn_4k.envMap=E,S.StoneAllIn_4k.envMapIntensity=2;let N=(0,i.useCallback)(()=>new Promise(e=>{u.current&&(u.current.visible=!0);let t=z.Intro;t instanceof v.AnimationAction&&(t.reset(),t.timeScale=1,t.enabled=!0,t.clampWhenFinished=!0,t.setLoop(v.LoopRepeat,0),t.play(),onActionFinished(t,()=>{k.current=!0,e()}))}),[z.Intro]),F=(0,i.useCallback)(()=>new Promise(async e=>{k.current=!1,await T();let t=z.Intro;t instanceof v.AnimationAction&&(t.reset(),t.timeScale=-1,t.time=t.getClip().duration-.5,t.enabled=!0,t.clampWhenFinished=!0,t.setLoop(v.LoopRepeat,0),t.play(),onActionFinished(t,()=>{u.current&&(u.current.visible=!1)})),setTimeout(()=>e(),600)}),[z.Intro]),T=(0,i.useCallback)(async()=>{let e=C.current.map(async(e,t)=>{let n=V.current[t],o=f.Y3,i=eulerToVector3(n.rotation),r=tweenAsync(n.position,e,{ease:o,duration:.2}),s=tweenAsync(i,new v.Vector3,{ease:o,duration:.2,onUpdate:e=>n.rotation.setFromVector3(e)});await Promise.all([r,s])});await Promise.all(e)},[]);return(0,i.useEffect)(()=>{u.current?.traverse(e=>{e instanceof v.Mesh&&V.current.push(e)})},[]),(0,i.useEffect)(()=>{r?.({id:"Stone",in:N,out:F,dispose:()=>{}})},[r,N,F]),(0,a.F)(e=>{let{pointer:t}=e;if(u.current?.visible&&k.current)for(let e=0;e<C.current.length;e++){let o=C.current[e];if(!o)continue;M.current.set(t.x,t.y,0).multiplyScalar(4+8*n.get()),R.current.copy(o);let i=1.5*(0,m.u)(R.current.distanceTo(M.current),0,2),r=A.subVectors(P,R.current);r.normalize();let s=(2-(i-1))*.2,a=r.multiplyScalar(s),l=R.current.sub(a);V.current[e]&&(V.current[e].position.lerp(l,.1),V.current[e].rotation.y=(0,c.t)(V.current[e].rotation.y,(l.x-o.x)*1,.1),V.current[e].rotation.z=(0,c.t)(V.current[e].rotation.z,(l.z-o.z)*1,.1))}}),(0,o.jsx)("group",{...s,ref:(0,h.l)([t,u]),dispose:null,rotation:[.2,0,0],visible:!1,onPointerEnter:()=>l.setCursor("pointer"),onPointerLeave:()=>l.setCursor("auto"),children:(0,o.jsxs)("group",{name:"Scene",children:[(0,o.jsx)("mesh",{name:"Stone_022",geometry:w.Stone_022.geometry,material:S.StoneAllIn_4k,position:[3.125,-1.044,-.375]}),(0,o.jsx)("mesh",{name:"Stone_021",geometry:w.Stone_021.geometry,material:S.StoneAllIn_4k,position:[-3.145,-.172,-.065]}),(0,o.jsx)("mesh",{name:"Stone_020",geometry:w.Stone_020.geometry,material:S.StoneAllIn_4k,position:[-1.691,-.876,.957]}),(0,o.jsx)("mesh",{name:"Stone_019",geometry:w.Stone_019.geometry,material:S.StoneAllIn_4k,position:[-.882,-.114,-.718]}),(0,o.jsx)("mesh",{name:"Stone_018",geometry:w.Stone_018.geometry,material:S.StoneAllIn_4k,position:[2.557,1.162,1.529]}),(0,o.jsx)("mesh",{name:"Stone_017",geometry:w.Stone_017.geometry,material:S.StoneAllIn_4k,position:[.871,-.368,-.698]}),(0,o.jsx)("mesh",{name:"Stone_016",geometry:w.Stone_016.geometry,material:S.StoneAllIn_4k,position:[3.163,.316,.765]}),(0,o.jsx)("mesh",{name:"Stone_015",geometry:w.Stone_015.geometry,material:S.StoneAllIn_4k,position:[3.26,-.376,-.592]}),(0,o.jsx)("mesh",{name:"Stone_014",geometry:w.Stone_014.geometry,material:S.StoneAllIn_4k,position:[-2.891,.387,-1.242]}),(0,o.jsx)("mesh",{name:"Stone_013",geometry:w.Stone_013.geometry,material:S.StoneAllIn_4k,position:[2.93,.889,.624]}),(0,o.jsx)("mesh",{name:"Stone_012",geometry:w.Stone_012.geometry,material:S.StoneAllIn_4k,position:[1.247,.506,1.252]}),(0,o.jsx)("mesh",{name:"Stone_011",geometry:w.Stone_011.geometry,material:S.StoneAllIn_4k,position:[1.83,.899,1.098]}),(0,o.jsx)("mesh",{name:"Stone_010",geometry:w.Stone_010.geometry,material:S.StoneAllIn_4k,position:[.15,-.129,.855]}),(0,o.jsx)("mesh",{name:"Stone_009",geometry:w.Stone_009.geometry,material:S.StoneAllIn_4k,position:[1.906,-1.237,-1.055]}),(0,o.jsx)("mesh",{name:"Stone_008",geometry:w.Stone_008.geometry,material:S.StoneAllIn_4k,position:[-2.515,.419,-.172]}),(0,o.jsx)("mesh",{name:"Stone_007",geometry:w.Stone_007.geometry,material:S.StoneAllIn_4k,position:[1.684,.149,.317]}),(0,o.jsx)("mesh",{name:"Stone_006",geometry:w.Stone_006.geometry,material:S.StoneAllIn_4k,position:[-2.211,.329,-1.467]}),(0,o.jsx)("mesh",{name:"Stone_005",geometry:w.Stone_005.geometry,material:S.StoneAllIn_4k,position:[.294,-.404,-.153]}),(0,o.jsx)("mesh",{name:"Stone_004",geometry:w.Stone_004.geometry,material:S.StoneAllIn_4k,position:[-1.742,.565,-.987]}),(0,o.jsx)("mesh",{name:"Stone_003",geometry:w.Stone_003.geometry,material:S.StoneAllIn_4k,position:[-.792,-.298,1.169]}),(0,o.jsx)("mesh",{name:"Stone_002",geometry:w.Stone_002.geometry,material:S.StoneAllIn_4k,position:[-1.515,-.088,.377]}),(0,o.jsx)("mesh",{name:"Stone_001",geometry:w.Stone_001.geometry,material:S.StoneAllIn_4k,position:[1.84,-.591,-.782]}),(0,o.jsx)("mesh",{name:"Stone_",geometry:w.Stone_.geometry,material:S.StoneAllIn_4k,position:[-3.224,.567,-.626]}),(0,o.jsx)("mesh",{name:"Stone_023",geometry:w.Stone_023.geometry,material:S.StoneAllIn_4k,position:[-2.784,-.406,.634]})]})})});z.displayName="Stone",d.L.preload((0,g.h)(matchMedia("(max-width: 1024px)").matches?_:b));var k=n(37156),V=n.p+"static/media/cloth-opt.0adeff9b.glb",C=n.p+"static/media/cloth-mobile-opt.c3d52f62.glb";let M={desktop:{src:V,node:"Retopo_FABRICK001_Baked"},mobile:{src:C,node:"Retopo_FABRICK_Baked"}},getDevice=()=>matchMedia("(max-width: 1024px)").matches?"mobile":"desktop",R=new v.Vector3(0),E=new v.Vector3(0),N=(0,i.forwardRef)((e,t)=>{let{sectionScrollYProgress:n,register:r,...s}=e,l=use_canvas(),m=(0,i.useRef)(null),u=(0,i.useRef)(null),p=(0,i.useRef)(null),x=(0,i.useRef)(!1),y=getDevice(),b="mobile"===y?1:0,_=M[y],w=(0,g.h)(_.src),{nodes:S}=(0,d.L)(w,!0),j=S[_.node].geometry,{clock:P}=(0,a.D)(),{raycaster:A,camera:I}=(0,a.D)(),z=S[_.node].material.emissiveMap,V=(0,i.useMemo)(()=>{let e={pointerPosition:{value:new v.Vector3(0,0,0)},global2DPointerPosition:{value:new v.Vector2(0,0)},elasticity:{value:8},damping:{value:.72},brushSize:{value:2.6},brushStrength:{value:.8},time:{value:0},tex:{value:z},alpha:{value:0},wobblePositionFrequency:{value:.05},positionFrequency:{value:.01},strength:{value:6.4},wobbleStrength:{value:1.7},smoothness:{value:.65},forceMov:{value:2},mobileTrace:{value:b}};return new v.ShaderMaterial({uniforms:e,vertexShader:"#define GLSLIFY 1\nuniform vec3 pointerPosition;\nuniform vec2 global2DPointerPosition;\nuniform float elasticity;\nuniform float damping;\nuniform float brushSize;\nuniform float brushStrength;\nuniform float time;\nuniform float wobblePositionFrequency;\nuniform float positionFrequency;\nuniform float strength;\nuniform float wobbleStrength;\nuniform float smoothness;\nuniform float forceMov;\n\nattribute vec3 basePosition;\n\nvarying vec2 vUv; \n\n//	Simplex 4D Noise \n//	by Ian McEwan, Stefan Gustavson (https://github.com/stegu/webgl-noise)\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nfloat permute(float x){return floor(mod(((x*34.0)+1.0)*x, 289.0));}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nfloat taylorInvSqrt(float r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nvec4 grad4(float j, vec4 ip){\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n}\n\nfloat snoise(vec4 v){\n  const vec2  C = vec2( 0.138196601125010504,  // (5 - sqrt(5))/20  G4\n                        0.309016994374947451); // (sqrt(5) - 1)/4   F4\n// First corner\n  vec4 i  = floor(v + dot(v, C.yyyy) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C \n  vec4 x1 = x0 - i1 + 1.0 * C.xxxx;\n  vec4 x2 = x0 - i2 + 2.0 * C.xxxx;\n  vec4 x3 = x0 - i3 + 3.0 * C.xxxx;\n  vec4 x4 = x0 - 1.0 + 4.0 * C.xxxx;\n\n// Permutations\n  i = mod(i, 289.0); \n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n            i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n          + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n          + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n          + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n// Gradients\n// ( 7*7*6 points uniformly over a cube, mapped onto a 4-octahedron.)\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n              + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n}\n\nvoid main() {\n\n  vec3 currentPosition = position;\n\n  // Pinch effect (Interaction with pointer)\n  vec3 worldPos = (modelMatrix * vec4(currentPosition, 1.0)).xyz;\n  float distToPointer = distance(worldPos, pointerPosition.xyz);\n  float forcePinch = 1.0 - smoothstep(0.0, brushSize, distToPointer);\n  forcePinch = pow(forcePinch, smoothness);\n  vec3 direction = normalize(worldPos - pointerPosition.xyz);\n  currentPosition += direction * forcePinch * brushStrength;\n // Apply smooth deformation\n  currentPosition = mix(position, currentPosition, smoothstep(0.0, 1.0, forcePinch));\n\n  // try to simulate physics\n  float dist = distance(basePosition, currentPosition);\n  vec3 force = elasticity * dist * normal;\n  vec3 velocity = currentPosition - basePosition;\n  velocity += force;\n  velocity *= damping;\n  currentPosition += velocity;\n\n  // Wobble deformation motion\n  vec3 wobbledPosition = basePosition;\n  wobbledPosition += snoise(vec4(position * wobblePositionFrequency, time * 0.5)) * wobbleStrength * normal;\n  currentPosition += snoise(vec4(wobbledPosition * positionFrequency, time * 0.3)) * strength * normal;\n\n  vec4 modelPosition = modelMatrix * vec4(currentPosition, 1.0);\n  vec3 movingDirection = normalize(vec3(global2DPointerPosition, modelPosition.z)); \n  float distanceEffect = pow(distance(modelPosition.xy, global2DPointerPosition) / 2.0, 2.0);\n  modelPosition.xyz += movingDirection*forceMov*distanceEffect;\n  vec4 mvPosition = viewMatrix * modelPosition;\n  gl_Position = projectionMatrix * mvPosition;\n  vUv= uv;\n}\n",fragmentShader:"#define GLSLIFY 1\nvarying vec2 vUv;\nuniform sampler2D tex;\nuniform float alpha;\nuniform float mobileTrace;\n\nvoid main() {\n\n  vec4 color = texture(tex, vUv);\n  gl_FragColor = vec4(color.xyz, alpha);\n\n  if(mobileTrace == 0.0) {\n   #include <tonemapping_fragment>\n  }\n\n  #include <colorspace_fragment>\n  #include <encodings_fragment>\n\n}\n",transparent:!0})},[]);(0,i.useEffect)(()=>{if(!p.current)return;p.current.visible=!0;let e=setTimeout(()=>{p.current&&(p.current.visible=!1)},10);return()=>clearTimeout(e)},[]),(0,i.useEffect)(()=>{let e=j.attributes.position.array;j.setAttribute("basePosition",new v.BufferAttribute(e,3)),x.current=!0},[j]),(0,a.F)((e,t)=>{let{pointer:n}=e;if(!m.current||!x.current)return;let o=Math.min(Math.abs(m.current.getWorldPosition(E).z),50),i=A.intersectObject(m.current);A.setFromCamera(n,I);let r=m.current.material.uniforms;i.length>0?(r.pointerPosition.value.lerp(i[0].point,.1),r.brushStrength.value=(0,c.t)(r.brushStrength.value,.8*o/30,.1)):(r.pointerPosition.value.lerp(R,.001),r.brushStrength.value=(0,c.t)(r.brushStrength.value,0,.1)),r.forceMov.value=(0,c.t)(r.forceMov.value,.8*o/30,.1),r.global2DPointerPosition.value=n,r.time.value=P.getElapsedTime()});let C=(0,i.useCallback)(()=>{let e=p.current,t=m.current,n=u.current;if(!e||!t||!n)return Promise.resolve();e.visible=!0;let o=tweenAsync({opacity:0},{opacity:1},{ease:f.Y3,duration:.2,onUpdate:e=>t.material.uniforms.alpha.value=e.opacity}),i=tweenAsync({y:.2,x:1},{y:0,x:0},{ease:f.Y3,duration:.8,onUpdate:e=>(n.rotation.y=e.y,n.rotation.x=e.x)}),r=tweenAsync({y:0,z:0},{y:1,z:1},{ease:f.Y3,duration:.8,onUpdate:e=>(n.scale.setY(e.y),n.scale.setZ(e.z))}),s=tweenAsync({x:0},{x:1},{ease:f.Y3,duration:.4,onUpdate:e=>n.scale.setX(e.x)});return Promise.all([o,i,s,r])},[]),N=(0,i.useCallback)(()=>{let e=p.current,t=m.current,n=u.current;return e&&t&&n&&(tweenAsync({opacity:1},{opacity:0},{ease:f.g4,delay:.1,duration:.3,onUpdate:e=>t.material.uniforms.alpha.value=e.opacity}),tweenAsync({y:0,x:0},{y:.2,x:1},{ease:f.g4,duration:.4,onUpdate:e=>(n.rotation.y=e.y,n.rotation.x=e.x)}),tweenAsync({y:1,z:1},{y:0,z:0},{ease:f.J7,duration:.6,onUpdate:e=>(n.scale.setY(e.y),n.scale.setZ(e.z))}),tweenAsync({x:1},{x:0},{ease:(0,k._)(.46,-.53,.3,1.04),duration:.6,onUpdate:e=>n.scale.setX(e.x),onComplete:()=>{e.visible=!1}})),Promise.resolve()},[]);return(0,i.useEffect)(()=>{r?.({id:s.name??"WobbleCloth",in:C,out:N,dispose:()=>{}})},[r,C,N,s.name]),(0,o.jsx)("group",{...s,ref:(0,h.l)([t,p]),dispose:null,onPointerEnter:()=>l.setCursor("pointer"),onPointerLeave:()=>l.setCursor("auto"),children:(0,o.jsx)("group",{ref:u,children:(0,o.jsx)("mesh",{ref:m,geometry:j,material:V,rotation:[.2,0,0],scale:.029,position:[.5,0,0]})})})});N.displayName="ClothBubble",d.L.preload(M[getDevice()].src);var F=class{add(e){let t=this.models.find(t=>t.id===e.id);t||this.models.push(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.isInitialized)return;let t=this.models[e];t&&(this.activeModelIdx=e,this.isInitialized=!0,this.isAnimating=!0,t.in().then(()=>this.isAnimating=!1))}async next(){if(this.isAnimating)return;let e=this.models[this.activeModelIdx];if(!e)return;let t=(this.activeModelIdx+1)%this.models.length,n=this.models[t];n&&(this.activeModelIdx=t,this.isAnimating=!0,await e.out(),await n.in(),this.isAnimating=!1)}getModels(){return this.models}getActiveIndex(){return this.activeModelIdx}dispose(){this.models.forEach(e=>e.dispose()),this.models=[],this.activeModelIdx=-1,this.isInitialized=!1,this.isAnimating=!1}constructor(){this.models=[],this.activeModelIdx=-1,this.isAnimating=!1,this.isInitialized=!1,this.init=this.init.bind(this),this.next=this.next.bind(this),this.add=this.add.bind(this),this.dispose=this.dispose.bind(this)}};let T=(0,i.forwardRef)((e,t)=>{let{sectionScrollYProgress:n,...r}=e,[s]=(0,i.useState)(()=>new F),l=(0,i.useRef)(null),d=(0,u.E)();return(0,i.useEffect)(()=>{d&&s.init()},[d,s]),(0,i.useEffect)(()=>()=>{s.dispose()},[s]),(0,a.F)(e=>{let{pointer:t}=e;l.current&&matchMedia("(any-hover: hover), (hover: hover) and (pointer: fine)").matches&&(l.current.rotation.x=(0,c.t)(l.current.rotation.x,-(0,m.u)(.1*t.y,-.2,.2),.1),l.current.rotation.y=(0,c.t)(l.current.rotation.y,(0,m.u)(.1*t.x,-.2,.2),.1))}),(0,o.jsx)("group",{...r,ref:t,children:(0,o.jsxs)("group",{ref:l,children:[(0,o.jsx)(z,{sectionScrollYProgress:n,register:s.add,onClick:s.next}),(0,o.jsx)(N,{sectionScrollYProgress:n,register:s.add,onClick:s.next})]})})});T.displayName="KeyVisualModels";var KeyVisual_KeyVisual=()=>{let e=(0,i.useRef)(null),t=(0,i.useRef)(document.querySelector(".first-section")),[n]=(0,l.zY)(),{scrollYProgress:c}=(0,r.v)({target:t,offset:["start start","end end"]}),m=(0,s.H)(c,[0,.65],[0,1]),u=(0,s.H)(c,[0,.5],[0,1]);return(0,a.F)(()=>{e.current&&(e.current.position.z="desktop"===n?-40+15*(1-5*m.get()):-40+5*(1-u.get()))}),(0,o.jsx)(T,{ref:e,position:[-.2,0,-40],sectionScrollYProgress:"desktop"===n?m:u})},Y=n(41079);let Ready=()=>{let e=(0,Y.$q)();return(0,i.useEffect)(()=>{e(!0)},[e]),null};var webgl_Scene=()=>(0,o.jsxs)(i.Suspense,{children:[(0,o.jsx)(KeyVisual_KeyVisual,{}),(0,o.jsx)(Ready,{})]})},25570:function(e,t,n){n.d(t,{T:function(){return i}});var o=n(85470);let i=(0,o.Z)()}}]);